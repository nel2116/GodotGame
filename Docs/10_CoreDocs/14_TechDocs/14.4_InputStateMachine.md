---
title: 入力管理とステートマシン制御
version: 0.1.0
status: draft
updated: 2025-06-06
tags:
    - Technical
    - Prototype
    - Reactive
linked_docs:
    - 14.2_PrototypeTechnicalDesign
---

# 入力管理とステートマシン制御

## 目次

1. [概要](#概要)
2. [詳細](#詳細)
3. [使用方法](#使用方法)
4. [制限事項](#制限事項)
5. [変更履歴](#変更履歴)

## 概要

プレイヤー入力をリアクティブに扱い、状態遷移を明確化するための設計方針。

## 詳細

- `Input`イベントを`Observable`としてストリーム化
- ステートごとに入力をフィルタリングし、`FiniteStateMachine`へ通知
- アニメーションと物理挙動を`Signal`連携で切り替え

## 使用方法

1. 各入力アクションを`InputMap`に登録
2. `Observable`で入力を監視し、必要なタイミングで`FSM`の遷移メソッドを呼び出す
3. `State`クラス内で`Subscribe`し、反応的に処理を実装

## 制限事項

- 複雑な同時入力はストリーム結合の設計を慎重に行う必要がある
- Godot標準の`Action`コールバックとは併用不可

## 変更履歴

| バージョン | 更新日     | 変更内容 |
| ---------- | ---------- | -------- |
| 0.1.0      | 2025-06-06 | 初版作成 |

