---
title: Combat System
version: 0.3
status: approved
updated: 2025-06-07
tags:
    - Technical
    - Combat
    - System
related_tech_docs:
    - 14.1_Requirement.md
    - 14.2_PrototypeTechnicalDesign.md
    - 14.3_GodotEnvironment.md
    - 14.4_InputStateMachine.md
    - 14.5_DungeonGeneration.md
    - 14.6_EnemyAIFoundation.md
    - 14.8_SkillCooldown.md
    - 14.9_SaveDataManagement.md
    - 14.10_UILayout.md
    - 14.11_TestAutomation.md
    - 14.12_PerformanceProfiling.md
    - 14.13_TechnicalDesignSpec.md
    - 14.14_GameManager.md
    - 14.15_UIManager.md
    - 14.16_SoundManager.md
    - 14.17_DebugManager.md
    - 14.18_SystemArchitecture.md
related_impl_specs:
    - 15.1_ReactiveSystemImpl.md
    - 15.2_StateManagementImpl.md
    - 15.3_EnemyAISpec.md
    - 15.4_CombatSystemSpec.md
    - 15.5_SkillSystemSpec.md
    - 15.6_SaveLoadSpec.md
    - 15.7_UIUXSpec.md
    - 15.8_TestPerformanceSpec.md
    - 15.12_PerformanceOptimizationSpec.md
---

# 戦闘システム

## 目次

1. [概要](#概要)
2. [システム設計](#システム設計)
3. [戦闘フロー](#戦闘フロー)
4. [ダメージ計算](#ダメージ計算)
5. [戦闘効果](#戦闘効果)
6. [関連ドキュメント](#関連ドキュメント)
7. [変更履歴](#変更履歴)

## 概要

本ドキュメントは、戦闘システムの設計を定義する。リアルタイムアクションとターン制を組み合わせたハイブリッドな戦闘システムを実現する。

## システム設計

### 1. アーキテクチャ
- コンポーネントベースの設計
- イベント駆動型の制御
- 状態管理システムとの連携

### 2. 主要コンポーネント
- 戦闘マネージャー
- ダメージ計算機
- エフェクトマネージャー
- 戦闘UIコントローラー

## 戦闘フロー

### 1. 基本フロー
- 戦闘開始
  - 敵の出現
  - 初期配置
  - 戦闘準備
  - 開始演出
- ターン進行
  - ターン開始
  - 行動順決定
  - 行動実行
  - ターン終了
- アクション実行
  - 移動
  - 攻撃
  - スキル
  - アイテム
- 戦闘終了
  - 勝利判定
  - 敗北判定
  - 報酬計算
  - 終了演出

### 2. 状態遷移
- 待機状態
  - 行動可能
  - 行動不可
  - スキル使用中
  - アイテム使用中
- 行動選択
  - 移動範囲表示
  - 攻撃範囲表示
  - スキル選択
  - アイテム選択
- アクション実行
  - 移動実行
  - 攻撃実行
  - スキル実行
  - アイテム実行
- 結果処理
  - ダメージ計算
  - 状態異常適用
  - バフ/デバフ適用
  - 戦闘結果更新

## ダメージ計算

### 1. 基本計算
- 攻撃力
  - 基礎攻撃力
  - 武器補正
  - スキル補正
  - バフ補正
- 防御力
  - 基礎防御力
  - 防具補正
  - スキル補正
  - バフ補正
- クリティカル
  - 発生確率
  - ダメージ倍率
  - スキル補正
  - 装備補正
- 属性相性
  - 属性値
  - 相性倍率
  - 耐性値
  - 弱点値

### 2. 特殊効果
- バフ/デバフ
  - 攻撃力増減
  - 防御力増減
  - 速度増減
  - 命中率増減
- 状態異常
  - 毒
  - 麻痺
  - 混乱
  - 睡眠
- コンボボーナス
  - 連続ヒット
  - コンボ数
  - ダメージ増加
  - 特殊効果
- 環境効果
  - 地形効果
  - 天候効果
  - 時間帯効果
  - イベント効果

## 戦闘効果

### 1. 視覚効果
- ヒットエフェクト
- スキルエフェクト
- 状態異常表示
- ダメージ表示

### 2. サウンド効果
- 攻撃音
- 被弾音
- スキル音
- 環境音

## 関連ドキュメント

### 技術ドキュメント
- [14.1 要件定義](14.1_Requirement.md) - プロジェクトの要件定義
- [14.2 プロトタイプ技術設計](14.2_PrototypeTechnicalDesign.md) - プロトタイプ開発の技術設計
- [14.3 Godot環境設定](14.3_GodotEnvironment.md) - 開発環境の設定と構成
- [14.4 入力状態管理](14.4_InputStateMachine.md) - 入力システムの設計
- [14.5 ダンジョン生成](14.5_DungeonGeneration.md) - ダンジョン生成システムの設計
- [14.6 敵AI基盤](14.6_EnemyAIFoundation.md) - 敵AIシステムの設計
- [14.8 スキルクールダウン](14.8_SkillCooldown.md) - スキルクールダウンシステムの設計
- [14.9 セーブデータ管理](14.9_SaveDataManagement.md) - セーブデータ管理システムの設計
- [14.10 UIレイアウト](14.10_UILayout.md) - UIレイアウトシステムの設計
- [14.11 テスト自動化](14.11_TestAutomation.md) - テスト自動化システム
- [14.12 パフォーマンス分析](14.12_PerformanceProfiling.md) - パフォーマンス分析システム
- [14.13 技術設計仕様](14.13_TechnicalDesignSpec.md) - 全体の技術設計仕様
- [14.14 ゲームマネージャー](14.14_GameManager.md) - ゲーム管理システムの設計
- [14.15 UIマネージャー](14.15_UIManager.md) - UI管理システムの設計
- [14.16 サウンドマネージャー](14.16_SoundManager.md) - サウンド管理システムの設計
- [14.17 デバッグマネージャー](14.17_DebugManager.md) - デバッグ管理システムの設計
- [14.18 システムアーキテクチャ](14.18_SystemArchitecture.md) - 全体システムアーキテクチャ

### 実装仕様書
- [15.1 リアクティブシステム実装仕様](15.1_ReactiveSystemImpl.md) - リアクティブシステムの実装詳細
- [15.2 状態管理実装仕様](15.2_StateManagementImpl.md) - 状態管理システムの実装詳細
- [15.3 敵AI実装仕様](15.3_EnemyAISpec.md) - 敵AIシステムの実装詳細
- [15.4 戦闘システム実装仕様](15.4_CombatSystemSpec.md) - 戦闘システムの実装詳細
- [15.5 スキルシステム実装仕様](15.5_SkillSystemSpec.md) - スキルシステムの実装詳細
- [15.6 セーブ・ロード実装仕様](15.6_SaveLoadSpec.md) - セーブ・ロードシステムの実装詳細
- [15.7 UI/UX実装仕様](15.7_UIUXSpec.md) - UI/UXシステムの実装詳細
- [15.8 テスト・パフォーマンス実装仕様](15.8_TestPerformanceSpec.md) - テストとパフォーマンスの実装詳細
- [15.12 パフォーマンス最適化実装仕様](15.12_PerformanceOptimizationSpec.md) - パフォーマンス最適化の実装詳細

## 変更履歴

| バージョン | 更新日     | 変更内容                 |
| ---------- | ---------- | ------------------------ |
| 0.3        | 2025-06-07 | テンプレート統一化       |
| 0.2        | 2025-05-29 | テンプレート統一化       |
| 0.1.0      | 2025-05-28 | 初版作成                 |

