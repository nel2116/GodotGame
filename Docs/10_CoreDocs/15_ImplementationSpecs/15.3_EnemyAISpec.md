---
title: 敵AI実装仕様
version: 0.1.0
status: draft
updated: 2025-06-06
tags:
    - Implementation
    - EnemyAI
linked_docs:
    - "[[14.6_EnemyAIFoundation.md|敵AI基礎]]"
    - "[[14.13_TechnicalDesignSpec.md|技術詳細設計書]]"
---

# 敵AI実装仕様

## 目次

1. [概要](#概要)
2. [ユースケース図](#ユースケース図)
3. [状態遷移図](#状態遷移図)
4. [アクティビティ図](#アクティビティ図)
5. [クラス図](#クラス図)
6. [変更履歴](#変更履歴)

## 概要

`EnemySensor` がプレイヤー位置や被弾イベントを検知し、`EnemyStateMachine` に状態遷移を通知。 `AIController` が各コンポーネントを統合して敵挙動を制御する。

## ユースケース図

```mermaid
graph TD
    Player -->|攻撃/接近| EnemySensor
    EnemySensor -->|イベント| EnemyStateMachine
    EnemyStateMachine --> AIController
    AIController --> Enemy(敵キャラクター)
```

## 状態遷移図

```mermaid
stateDiagram-v2
    [*] --> Idle
    Idle --> Chase : プレイヤー発見
    Chase --> Attack : 距離接近
    Attack --> Idle : プレイヤー離脱
    Attack --> Stun : 被弾
    Stun --> Idle : 復帰
```

## アクティビティ図

```mermaid
flowchart TD
    Sense[環境検知] --> Decide[状態判断]
    Decide -->|追跡| MoveTo
    Decide -->|攻撃| DoAttack
    Decide -->|待機| Wait
    MoveTo --> End
    DoAttack --> End
    Wait --> End
```

## クラス図

```mermaid
classDiagram
    class EnemySensor {
        +connect_signals(target)
    }
    class EnemyStateMachine {
        +transition(state)
    }
    class AIController {
        +start()
        +stop()
    }
    EnemySensor --> EnemyStateMachine
    EnemyStateMachine --> AIController
```

## 変更履歴

| バージョン | 更新日     | 変更内容 |
| ---------- | ---------- | -------- |
| 0.1.0      | 2025-06-06 | 初版作成 |
