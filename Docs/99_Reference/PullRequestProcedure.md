---
title: プルリクエスト手順
version: 0.1.0
status: draft
updated: 2025-06-01
tags:
    - Git
    - GitHub
    - PullRequest
    - Procedure
    - Workflow
    - Reference
linked_docs:
    - "[[ProjectRules#プロジェクトルール|プロジェクトルール]]"
    - "[[GithubIssueEditingWorkflow#github-issue編集ワークフロー|GitHub Issue編集ワークフロー]]"
---

# プルリクエスト作成手順

## 目次

1. [概要](#概要)
2. [前提条件](#前提条件)
3. [手順](#手順)
4. [トラブルシューティング](#トラブルシューティング)
5. [推奨事項](#推奨事項)

## 概要

本ドキュメントは、新しい機能の実装、バグ修正、ドキュメント更新などの変更をメインブランチに取り込むための標準的なプルリクエスト (PR) 作成手順を定めます。

## 前提条件

-   Git がインストールされ、設定済みであること。
-   GitHub CLI (`gh`) がインストールされ、認証済みであること。
-   作業対象のリポジトリをクローンし、作業ディレクトリにいること。
-   変更をコミットする前に、ローカルの作業ブランチが最新の状態であること (例: `git pull origin develop`)。

## 手順

1.  **作業状況の確認**
    変更が正しくステージングまたは untracked になっているか確認します。

    ```bash
    git status
    ```

2.  **新しいフィーチャーブランチの作成とチェックアウト**
    変更内容に応じた意味のある名前（例: `feature/add-telemetry-docs`, `fix/login-bug`）で新しいブランチを作成し、そのブランチに移動します。

    ```bash
    git checkout -b <新しいブランチ名>
    ```

3.  **変更ファイルのステージング**
    コミットに含めたい変更ファイルや新しく追加したファイルをステージングエリアに追加します。

    ```bash
    git add <ファイルまたはディレクトリのパス>
    # 例:
    # git add Scripts/Core/
    # git add Docs/10_CoreDocs/15_ImplementationSpecs/
    ```

    全ての変更を一度に追加する場合は `git add .` を使用できますが、意図しないファイルを含めないよう注意が必要です。

4.  **変更内容のコミット**
    ステージングされた変更内容をコミットします。コミットメッセージは、何を変更したかを簡潔かつ明確に記述します。必要に応じて、関連する Issue 番号を含めます。

    ```bash
    git commit -m "<コミットメッセージ>"
    # 例:
    # git commit -m "feat: GameSystems AutoLoadシステムと関連ドキュメントの初期実装"
    # git commit -m "docs: Telemetryシステム実装仕様書を追加"
    # git commit -m "feat: GameSystems初期実装とドキュメント Closes #2"
    ```

5.  **ブランチのリモートへのプッシュ**
    作成したローカルブランチとそのコミットをリモートリポジトリにプッシュします。

    ```bash
    git push -u origin <新しいブランチ名>
    ```

    `-u origin <新しいブランチ名>` は、次回から `git push` だけでプッシュできるよう upstream ブランチを設定するオプションです。

6.  **プルリクエスト (PR) の作成**
    GitHub CLI を使用してプルリクエストを作成します。PR のタイトルと本文には、変更の概要、目的、含まれるファイル、関連 Issue などを明確に記述します。本文は `-b` オプションで直接指定するか、より複雑な場合は `-F <ファイル名>` オプションでファイルの内容を読み込ませるのが推奨されます。

    ```bash
    # 簡単な本文の場合
    git gh pr create --title "<PRタイトル>" --body "<PR本文>" --base <ベースブランチ名>
    # 例: git gh pr create --title "feat: GameSystems初期実装 #2" --body "GameSystemsシステムの初期実装と関連ドキュメントを追加しました。" --base develop

    # 長い/整形された本文の場合 (一時ファイルを作成して使用)
    # 一時ファイル (.pr_body.md など) にPR本文を記述
    # gh pr create --title "<PRタイトル>" --body-file <一時ファイル名> --base <ベースブランチ名>
    # 例: gh pr create --title "feat: GameSystems初期実装 #2" --body-file .pr_body.md --base develop
    ```

    `<ベースブランチ名>` は、通常 `develop` または `main` です。

7.  **プルリクエストの内容確認と必要に応じた更新**
    作成されたプルリクエストを GitHub 上で確認します。説明文の表示がおかしい場合や、コミットを追加・修正した場合は、`gh pr edit` コマンドを使用して更新します。コミットを修正（amend）して強制プッシュした場合も、PR は自動的に更新されます。

    ```bash
    # PR本文のみ修正する場合 (一時ファイルを使用)
    # gh pr edit <PR番号> --body-file <一時ファイル名>
    # 例: gh pr edit 20 --body-file .pr_body.md
    ```

8.  **レビューとマージ**
    チームの他のメンバーに PR をレビューしてもらいます。必要に応じて議論や追加の変更を行います。承認されたら、ベースブランチにマージします。

## トラブルシューティング

-   **コミットにファイルを含め忘れた:** `git add <忘れたファイル>` の後、`git commit --amend --no-edit` で直前のコミットに含めます。その後、`git push --force origin <ブランチ名>` でリモートを更新します。
-   **PR 本文の改行や表示がおかしい:** `-b` オプションではなく `-F <ファイル名>` オプションを使用して PR を作成/編集してください。

## 推奨事項

-   **ブランチ名:** `feature/`, `fix/`, `docs/`, `refactor/` などのプレフィックスを使用し、内容を端的に表す名前を付けましょう。
-   **コミットメッセージ:** 最初の行で変更の要約を書き、必要であれば空行を挟んで詳細を記述します。関連 Issue があれば `Closes #Issue番号` や `Fixes #Issue番号` と記載すると、マージ時に自動で Issue が閉じられます。
-   **PR タイトル:** 変更の概要がすぐにわかるタイトルにしましょう。関連 Issue 番号を含めるのも有効です。
-   **PR 本文:** 変更の背景、具体的な内容、テスト方法、懸念事項などを具体的に記述すると、レビュアーが理解しやすくなります。

---
